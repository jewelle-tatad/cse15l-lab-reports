# 01.18.2023 - 01.25.2023 Lab Report: Servers and Bugs

For the past two weeks, we have been working with servers. In this report, I will be going over the following:

- Codes and methods for servers using an example
- A bug I ran into during the lab, as well as its fix
- Things I didn't know about before I did the lab

## StringServer
I will be using the code for StringServer in order to demonstrate. This is based off of the NumberServer.java file we used in lab 2.
```
import java.io.IOException;
import java.net.URI;

class Handler implements URLHandler {
    // The one bit of state on the server: a number that will be manipulated by
    // various requests.
    String strHistory = "";

    /**
     * This method takes in a URI/URL to handle requests and counts how many times you've visited
     * the page.
     */
    public String handleRequest(URI url) {
        /**
         * Checks path
         * If in the default (/) path, display the total count (num)
         */
        if (url.getPath().equals("/")) {
            return strHistory;
        // if add-message, concatenate message to the end of string History
        } else {
            System.out.println("Path: " + url.getPath());
            if (url.getPath().contains("/add-message")) {
                // splits at = to create an array
                String[] parameters = url.getQuery().split("=");
                // looks for object "s" at the first idx of the parameters[]
                if (parameters[0].equals("s")) {
                    // adds str to strHistory
                    strHistory += parameters[1] + "\n";
                    return strHistory;
                }
            }
            return "404 Not Found!";
        }
    }
}

public class StringServer {
    public static void main(String[] args) throws IOException {
        if(args.length == 0){
            System.out.println("Missing port number! Try any number between 1024 to 49151");
            return;
        }

        int port = Integer.parseInt(args[0]);

        Server.start(port, new Handler());
    }
    
}
```
In order to start up the server on your local device, I compiled this code and a provided Server.java file and specified a port number when running.

```
$ javac StringServer.java Server.java
$ java StringServer 4040 # This number after StringServer is the port number.
Server Started! Visit http://localhost:4040 to visit.
```

Clicking on the link in my browser leads to the following.

![image](https://user-images.githubusercontent.com/122484428/215624372-aebb6f55-79b9-42d4-82c2-2e77c78e1199.png)

As you can see, there's currently nothing there! This is because we haven't added any messages yet. I will be adding messages using the following query.

```
/add-message?s=<string>
```

This calls the method handleRequest in the StringServer file, and if I've put the path in correctly, it should concatenate the string to the end of strHistory and display the string onto the webpage. Let's try that now!

```
http://localhost:4040/add-message?s=hiiiiii
handleRequest(http://localhost:4040/add-message?s=hiiiiii)
```

The method handleRequest was called, passing through the query when it detects "add-message" and adding in the string after "s=". The string after the query concatenates to strHistory and returns it.

![image](https://user-images.githubusercontent.com/122484428/215624774-15828fd8-646c-4bd9-bbab-65186b70f72f.png)

The same code should be called if we were to do this again.

```
http://localhost:4040/add-message?s=who%20are%20you # %20 is inserted everywhere a space was in your query. This should display as "who are you"
handleRequest(http://localhost:4040/add-message?s=who%20are%20you)
```

Again, handleRequest is called, and the value of strHistory is changed when "who are you" is concatenated.

![image](https://user-images.githubusercontent.com/122484428/215625086-4b674cc2-1507-4c1a-b259-017300e7a21b.png)

If we were to pass in a request with the root path, the following would happen.

```
http://localhost:4040/
handleRequest(http://localhost:4040/)
```

Since the path equals "/", it will return the curent strHistory. No values will change.

![image](https://user-images.githubusercontent.com/122484428/215625808-1a034a9b-82d7-4bec-8f23-e88541a5dd12.png)

If we were to pass in something that didn't have a specified path, handleRequest should return a "404 Not Found!" error.

```
http://localhost:4040/dance
handleRequest(http://localhost:4040/dance)
```

![image](https://user-images.githubusercontent.com/122484428/215626016-2c408924-2568-4585-baff-f2bd19aba128.png)

Because there was no specified path for "/dance", handleRequest returned a "404 Not Found!" error.

## Bugs


## More Info
